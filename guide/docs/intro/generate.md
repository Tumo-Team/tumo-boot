# 代码生成

对于**代码生成**功能，想必大家很熟悉了。无论是`Mybatis Generate`还是`Mybatis-Plus Generate`插件，都挺常见的，并且基于以上插件开源的各种项目也非常多。

而在一些热门的开源项目如：Pig、BladeX、等SaaS微服务项目中都集成了代码生成工具，并且提供了Web端可视化编辑功能。（可能一些同学并不太了解提供Web端可视化界面的代码生成功能是如何设计的，这里举例PigX项目集成的代码生成功能：[https://pigx.pig4cloud.com/#/gen/index](https://pigx.pig4cloud.com/#/gen/index)）

如上，随便在一些Java热门开源的后端管理项目中都能看到代码生成功能的身影。但笔者在使用过这些开源项目的代码生成功能后发现分为两类：

> 1.手动引入`mybatis generate`的依赖，手动写相应的配置代码

**缺点：** 1.学习成本高；2.需要添加`generate`依赖；3.所有的配置包括连接数据库的配置都要手写

**优点：** 所有有关代码生成的配置都是自定义的，定制化非常强

> 2.集成一套提供Web端管理的代码生成功能，Web端可视化编辑，自动将代码生成到指定位置

**缺点：** 定制化功能差（当然如果能实现从本地获取代码生成模板文件也可解决这一缺点），且需要依赖前端环境（也就是保证先启动项目）

**缺点：** 提供了Web端的可视化操作界面，学习成本低一些，可实现动态管理数据源、可视化编辑代码生成位置以及包名等配置。

## 为什么？

看完上述内容，相信你应该明白：对于代码生成功能，你需要关注什么？它能帮你解决什么？如何实现？

### 可定制化

1. **可自定义代码生成模板：** 不得不说，每个人的代码风格都不同，亦不能片面的定义一套标准，想要符合大众口味，必须能让开发者自己编辑生成代码的风格。并且，在基于Spring开发的项目一般都遵循MVC设计原则，代码生成模板应该至少包括：`controller`、`service`、`dao`、`entity`。
2. **可自定义数据库字段映射模板：** 什么是数据库字段映射？例如数据库中定义`datetime create_time`字段，那么生成Entity实体类属性该用什么数据类型？`Date/DateTime/LocalDateTime`应该都可以映射，而这显然不能写死，应该根据系统的不同修改为相应的数据类型。

### 可视化

1. **提供代码生成的GUI界面：** 方便修改生成代码的位置、所在package包名、是否全部（`controller`、`service`、`dao`、`entity`）都生成。
2. **提供选择数据源、数据表的可视化界面：** 方便开发者勾选生成哪个数据源下的哪张表。

### 优化

1. **配置模板要实时更新：** 作为一个新人，学习一套代码生成工具的自定义配置，肯定无法做到 一次配置成功，对于代码模板，可能要配置很多次才能达到自己满意的代码风格。不能像Web端界面那样，只有重启了服务器，配置才能生效。
2. **可预览生成代码的风格：** 一般我们会使用模板引擎来自定义代码生成模板，而模板代码无法直观看到效果，最好提供一个工具预览该模板生成的代码效果。

**那么，有没有办法可以同时兼顾上述三点呢？**

## EasyCode

